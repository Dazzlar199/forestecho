/**
 * ë„¤ì´ë²„ ë¸”ë¡œê·¸ìš© ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ ë²„ì „ ìƒì„±
 * HTML ì—†ì´ ë°”ë¡œ ë³µì‚¬ ë¶™ì—¬ë„£ê¸° ê°€ëŠ¥
 */

import { ARTICLES } from '../types/education'
import * as fs from 'fs'
import * as path from 'path'

function generateSimplePost(article: typeof ARTICLES[0]): string {
  const sections = article.content.ko

  let text = `
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${article.title.ko}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Œ ${article.summary.ko}

â° ì½ëŠ” ì‹œê°„: ${article.readTime}ë¶„
ğŸ“‚ ì¹´í…Œê³ ë¦¬: ${article.category}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ ëª©ì°¨
${sections.map((section, index) => `${index + 1}. ${section.heading || 'ë‚´ìš©'}`).join('\n')}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

${sections.map((section, sectionIndex) => `

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${sectionIndex + 1}. ${section.heading || 'ë‚´ìš©'}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

${section.paragraphs ? section.paragraphs.map(p => `${p}\n`).join('\n') : ''}

${section.list ? section.list.items.map((item, idx) =>
  section.list!.type === 'numbered'
    ? `${idx + 1}. ${item}`
    : `â€¢ ${item}`
).join('\n') : ''}

`).join('')}

${article.recommendedProducts && article.recommendedProducts.length > 0 ? `
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“š í•¨ê»˜ ì½ìœ¼ë©´ ì¢‹ì€ ì¶”ì²œ ë„ì„œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

${article.recommendedProducts.map((product, idx) => `
${idx + 1}. ${product.title.ko}

${product.description.ko}

ğŸ’° ê°€ê²©: â‚©${product.price.toLocaleString()}
ğŸ›’ êµ¬ë§¤í•˜ê¸°: ${product.link}

ğŸ“¸ ì´ë¯¸ì§€ URL (ë„¤ì´ë²„ ë¸”ë¡œê·¸ "ì‚¬ì§„" ë²„íŠ¼ìœ¼ë¡œ ì¶”ê°€):
${product.imageUrl}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
`).join('\n')}

â€» íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ìœ¼ë¡œ ì¼ì • ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤

` : ''}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“– ì°¸ê³  ìë£Œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

${article.sources.map(source => `â€¢ ${source.name} - ${source.organization}`).join('\n')}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸŒ² ìˆ²ìš¸ë¦¼ì—ì„œ AI ìƒë‹´ ë°›ì•„ë³´ì„¸ìš”

24ì‹œê°„ ì–¸ì œë“ ì§€, ì „ë¬¸ì ì¸ AI ì‹¬ë¦¬ìƒë‹´ì´ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

ğŸ‘‰ ì§€ê¸ˆ ìƒë‹´í•˜ê¸°: https://forestecho.app

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
`

  return text
}

async function main() {
  const outputDir = path.join(process.cwd(), 'blog-posts')
  const simpleDir = path.join(outputDir, 'simple')

  if (!fs.existsSync(simpleDir)) {
    fs.mkdirSync(simpleDir, { recursive: true })
  }

  console.log('ğŸ“ ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ ë²„ì „ ìƒì„± ì¤‘...\n')

  ARTICLES.forEach((article, index) => {
    const text = generateSimplePost(article)
    const txtPath = path.join(simpleDir, `${index + 1}_${article.id}.txt`)
    fs.writeFileSync(txtPath, text, 'utf-8')

    console.log(`âœ… ${index + 1}. ${article.title.ko}`)
  })

  console.log(`\nğŸ‰ ì´ ${ARTICLES.length}ê°œì˜ ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!`)
  console.log(`ğŸ“‚ ì €ì¥ ìœ„ì¹˜: ${simpleDir}`)
  console.log(`\nğŸ“‹ ì‚¬ìš© ë°©ë²• (ë§¤ìš° ê°„ë‹¨!):`)
  console.log(`1. .txt íŒŒì¼ì„ í…ìŠ¤íŠ¸ ì—ë””í„°ë¡œ ì—´ê¸°`)
  console.log(`2. ì „ì²´ ë³µì‚¬ (Cmd/Ctrl + A â†’ Cmd/Ctrl + C)`)
  console.log(`3. ë„¤ì´ë²„ ë¸”ë¡œê·¸ì— ê·¸ëƒ¥ ë¶™ì—¬ë„£ê¸°!`)
  console.log(`4. ì´ë¯¸ì§€ URL ë³µì‚¬í•´ì„œ "ì‚¬ì§„" ë²„íŠ¼ìœ¼ë¡œ ì¶”ê°€`)
  console.log(`\nğŸ’¡ HTML ì—†ì´ ë°”ë¡œ ë³µì‚¬ ë¶™ì—¬ë„£ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤!`)
}

main().catch(console.error)
